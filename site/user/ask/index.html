<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>Ask - Coral Project Docs</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Coral Project Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Developer Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../developer/">Introduction</a>
</li>

                        
                            
<li >
    <a href="../../developer/architectural_overview/">Architectural overview</a>
</li>

                        
                            
<li >
    <a href="../../quickstart/install/">Installing Coral Ecosystem</a>
</li>

                        
                            
<li >
    <a href="../../developer/developer_setup/">Developer tools setup</a>
</li>

                        
                            
<li >
    <a href="../../cay/">Cay</a>
</li>

                        
                            
<li >
    <a href="../../elkhorn/">Elkhorn</a>
</li>

                        
                            
<li >
    <a href="../../pillar/">Pillar</a>
</li>

                        
                            
<li >
    <a href="../../sponge/">Sponge</a>
</li>

                        
                            
<li >
    <a href="../../xenia/">Xenia</a>
</li>

                        
                            
<li >
    <a href="../../xenia/xenia-driver-js/">Xenia Driver</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../">Introduction</a>
</li>

                        
                            
<li >
    <a href="../trust/">Trust</a>
</li>

                        
                            
<li class="active">
    <a href="./">Ask</a>
</li>

                        
                            
<li >
    <a href="../talk/">Talk</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contribute <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../contribute/">Introduction</a>
</li>

                        
                            
<li >
    <a href="../../contribute/writing_documentation/">Writing documentation</a>
</li>

                        
                            
<li >
    <a href="../../contribute/docs_style_guide/">Documentation style guide</a>
</li>

                        
                            
<li >
    <a href="../../contribute/writing_code/">Writing code</a>
</li>

                        
                            
<li >
    <a href="../../contribute/coding_style_guide/">Coding style guide</a>
</li>

                        
                            
<li >
    <a href="../../contribute/reporting_bugs/">Reporting bugs and requesting features</a>
</li>

                        
                            
<li >
    <a href="../../contribute/code_of_conduct/">Code of Conduct</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../faq/">FAQ</a>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../trust/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../talk/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#ask">Ask</a></li>
        
            <li><a href="#what-is-ask">What is Ask?</a></li>
        
            <li><a href="#who-is-ask-for">Who is Ask for?</a></li>
        
            <li><a href="#architecture">Architecture</a></li>
        
            <li><a href="#roadmap">Roadmap</a></li>
        
            <li><a href="#ask-components">Ask components</a></li>
        
    
        <li class="main "><a href="#ask-installation">Ask installation</a></li>
        
    
        <li class="main "><a href="#ask-installation-basic-demo-setup">Ask installation: basic demo setup</a></li>
        
            <li><a href="#basic-demo-setup-mac-os-x">Basic demo setup: Mac OS X</a></li>
        
            <li><a href="#basic-demo-setup-linux">Basic demo setup: Linux</a></li>
        
            <li><a href="#basic-demo-setup-windows">Basic demo setup: Windows</a></li>
        
    
        <li class="main "><a href="#ask-installation-advanced-setup">Ask installation: advanced setup</a></li>
        
            <li><a href="#advanced-setup-mac-os-x">Advanced setup: Mac OS X</a></li>
        
            <li><a href="#advanced-setup-linux">Advanced setup: Linux</a></li>
        
            <li><a href="#advanced-setup-windows">Advanced setup: Windows</a></li>
        
    
        <li class="main "><a href="#troubleshooting_6">Troubleshooting</a></li>
        
            <li><a href="#old-version-of-docker">Old version of Docker</a></li>
        
            <li><a href="#viewing-running-docker-containers">Viewing running Docker containers</a></li>
        
            <li><a href="#viewing-installed-docker-images">Viewing installed Docker images</a></li>
        
            <li><a href="#viewing-docker-logs">Viewing Docker logs</a></li>
        
            <li><a href="#removing-docker-images">Removing Docker images</a></li>
        
            <li><a href="#removing-old-docker-machines">Removing old Docker machines</a></li>
        
            <li><a href="#other-issues-while-installing">Other issues while installing</a></li>
        
    
        <li class="main "><a href="#ask-tutorials">Ask tutorials</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="ask">Ask</h1>
<h2 id="what-is-ask">What is Ask?</h2>
<p>Ask is a tool that enables editors to create embeddable calls for contributions, including text, photo, video, and audio. The contributions can be connected to existing user profiles. Editors can manage high volumes of contributions, and display the best ones alongside the call. <a href="https://coralproject.net/products/ask.html" target="_blank">Read more about Ask here.</a></p>
<h2 id="who-is-ask-for">Who is Ask for?</h2>
<ul>
<li><strong>Engagement editors and journalists</strong>: People who invite, manage, and publish user-generated content in order to improve the quality of the journalism.</li>
<li><strong>End users</strong>: People who consume content and contribute their own knowledge and experiences, in order to improve the quality of the coverage so that it is closer to their own needs and experiences.</li>
<li><strong>Publishers</strong>: People who want to understand the value of engaging more deeply with segments of the users, in order to better assess how and why to invest smartly in community.</li>
</ul>
<p>We&rsquo;ve created a guide on how to write a well-considered form. <a href="https://blog.coralproject.net/forms-audience-engagement/">You can read it here.</a></p>
<h2 id="architecture">Architecture</h2>
<p><img alt="ask-architecture" src="../../images/ask-architecture.svg" /></p>
<h2 id="roadmap">Latest install</h2>
<p>Public beta of Ask, 0.40, was released on 9/14/16.</p>
<h2 id="ask-components">Ask components</h2>
<h3 id="create-form">Create form</h3>
<p>The form builder is located under &ldquo;Create Form.&rdquo;</p>
<h4 id="question-fields">Question fields</h4>
<p>Ask allows for multiple input field types to be added to a form. All fields are validated, except for phone number. Each input field also has the option to add a description.</p>
<ul>
<li><strong>Short Answer</strong>: Provides a single line text input area. You can set the character limits.</li>
<li><strong>Long Answer</strong>: Provides a paragraph text input area. You can set the character limits.</li>
<li><strong>Numbers</strong>: Only number characters can be entered in this field.</li>
<li><strong>Multiple Choice</strong>: Provides multiple choice answer options.</li>
<li><strong>Email</strong></li>
<li><strong>Date</strong></li>
<li><strong>Phone number</strong></li>
</ul>
<h4 id="additional-fields">Additional fields</h4>
<p>The form also has options for:</p>
<ul>
<li>A customizable &ldquo;thank you&rdquo; message after submitting.</li>
<li>Adding text without an entry field to the top of the form (a &ldquo;headline&rdquo; and instructions or description).</li>
<li>Terms and conditions that will appear as text at the bottom of the form.</li>
</ul>
<h3 id="embedding-the-generated-form">Embedding the generated form</h3>
<p>Once a form has been saved, an embed code is generated. You can then use this code to embed the form into your own page. Three options are presented for using the forms:</p>
<h4 id="embed-code">Embed code</h4>
<p>You can render a form directly into a page, using a <code>script src</code> tag. This offers the advantages of native CSS inheritance (as iframes won&rsquo;t inherit any CSS from the parent page). Note that the div-id does need to be <code>ask-form</code>: the name is hardcoded.</p>
<pre><code>&lt;div id=&quot;ask-form&quot;&gt;&lt;/div&gt;&lt;script src=&quot;[filewritelocation]/[formid].js&quot;&gt;&lt;/script&gt;
</code></pre>

<h4 id="embed-code-iframe">Embed code (iframe)</h4>
<p>You can take the standalone page link and use it in an iframe, which you can then embed directly into your page. You may have to tweak the width and height parameters.</p>
<pre><code>&lt;iframe src=&quot;https://[elkhornserver]/iframe/[form_id]&quot; width=&quot;100%&quot; height=&quot;600px&quot;&gt;&lt;/iframe&gt;
</code></pre>

<h4 id="standalone-form">Standalone form</h4>
<p>The &ldquo;Standalone Form&rdquo; button takes you to the form as a standalone page that you can link to.</p>
<h3 id="view-forms">View forms</h3>
<p>The &ldquo;View forms&rdquo; area allows you the create, edit, and view forms, as well as view the submissions made to your forms.</p>
<p>You can:</p>
<ul>
<li>see which forms are currently active.</li>
<li>see the number of submissions.</li>
<li>sort and search forms by creator/status/date created/words used in the questions.</li>
</ul>
<h1 id="ask-installation">Ask installation</h1>
<p>You can install the Ask product through a straightforward Docker Compose installation. This installs only the parts of Coral that are required for Ask.</p>
<p>There are two options currently available for installing Ask:</p>
<ul>
<li><strong><a href="#ask-installation-basic-demo-setup">Basic demo setup</a></strong>: The first option is an extremely simple demo setup: all variables are hardcoded, so all you have to do is run a few simple commands to get up and running on your laptop.<ul>
<li><strong><em>Probably best for you if:</em></strong> you just want to install and demo Ask.</li>
</ul>
</li>
<li><strong><a href="#ask-installation-advanced-setup">Advanced setup</a></strong>: The second option is still simple, but has a few more steps where you can set some variables and customize your setup (for instance, set up your own S3 bucket instead of using our hardcoded demo S3 bucket).<ul>
<li><strong><em>Probably best for you if:</em></strong> you want to do more with Ask than just a basic demo.</li>
</ul>
</li>
</ul>
<h1 id="ask-installation-basic-demo-setup">Ask installation: basic demo setup</h1>
<p>We currently support Mac, Linux, and Windows. Choose your operating system to view installation instructions.</p>
<ul>
<li><strong><a href="#basic-demo-setup-mac">Mac OS X</a></strong>: We support OS X El Capitan (10.11) or newer.</li>
<li><strong><a href="#basic-demo-setup-linux">Linux</a></strong>: We support Ubuntu 15.10 or newer.</li>
<li><strong><a href="#basic-demo-setup-windows">Windows</a></strong>: We support Windows 7 or newer.</li>
</ul>
<h2 id="basic-demo-setup-mac-os-x">Basic demo setup: Mac OS X</h2>
<h3 id="before-you-begin">Before you begin</h3>
<p>You must have the following items installed:</p>
<ul>
<li><strong>MongoDB</strong>: You can find instructions on installing MongoDB <a href="https://docs.mongodb.com/getting-started/shell/">on the MongoDB website</a>.<ul>
<li>Make sure MongoDB is running before you proceed: use the command <code>mongod</code> to start running MongoDB as a daemon.</li>
</ul>
</li>
<li><strong>Docker Toolbox</strong>: You can install Docker Toolbox from the <a href="https://www.docker.com/products/docker-toolbox">Docker Toolbox product page</a>.<ul>
<li>If you already have Docker installed, you&rsquo;ll want to make sure that you have Docker Compose version 1.7 or later. You can check your version using the command <code>docker-compose --version</code>.</li>
</ul>
</li>
</ul>
<p>You should also have the following resources on your machine before installing:</p>
<ul>
<li>Minimum CPU: 2.0 GHz</li>
<li>Minimum RAM: 4GB</li>
<li>Minimum disk space: 4GB</li>
</ul>
<h4 id="browser-requirements">Browser requirements</h4>
<p>We currently support Chrome.</p>
<h3 id="get-the-source-code">Get the source code</h3>
<p>Clone the Ask repository. This repository contains a number of setup files that you can edit, and will help you easily spin up a Docker container.</p>
<pre><code>git clone https://github.com/coralproject/ask.git
</code></pre>

<p>Then cd into the <code>ask/docker</code> directory.</p>
<pre><code>cd ask/docker
</code></pre>

<h3 id="start-docker">Start Docker</h3>
<p>Start Docker.</p>
<ul>
<li>On the server, you can do this via the command:
  <code>sudo service docker start</code></li>
<li>On your local machine, you can start Docker via the Docker Quickstart Terminal. This will usually be in your Applications folder, or (if on Mac) you can type &ldquo;docker quickstart&rdquo; into Spotlight to find it quickly. The Docker Quickstart Terminal will open a new terminal window, running Docker, that you will then use to run the rest of the Docker related commands below.</li>
</ul>
<h4 id="troubleshooting">Troubleshooting</h4>
<ul>
<li>You may have to use the command <code>eval $(docker-machine env)</code> before proceeding to get Docker to work.</li>
<li>If, at any point, you see the error message <code>Cannot connect to the Docker daemon. Is the docker daemon running on this host?</code>, this probably means that you are not running Docker commands within the Docker Quickstart Terminal. Make sure that you&rsquo;ve opened up the Docker Quickstart Terminal and are running your Docker commands there.</li>
<li>If you see an error like the one below, try closing and reopening Docker Quickstart Terminal again, or simply waiting (sometimes it can take a few moments).</li>
</ul>
<pre><code>(default) Check network to re-create if needed...
(default) Waiting for an IP...
</code></pre>

<h3 id="spin-up-the-docker-container">Spin up the Docker container</h3>
<p>Ensure you are in the <code>ask/docker</code> directory.</p>
<p>The very first time that you spin up the Docker container, this will be a multi-step process:</p>
<p>1. Spin up the Docker container:</p>
<pre><code>docker-compose -f ask-basic-local.yaml up -d
</code></pre>

<p>The <code>ask-basic-local.yaml</code> file contained in the <code>ask/docker</code> directory contains all the instructions that Docker Compose needs to set up the Ask product.</p>
<p><strong>Troubleshooting note</strong>: If you see an error, such as the one below, make sure that your Docker Compose installation is version 1.7 or above. You can check your version using the command <code>docker-compose --version</code>.</p>
<pre><code>Unsupported config option for services service: 'mongodata'
</code></pre>

<p>2. Docker will now download and install a number of Docker images. This may take a few minutes.</p>
<p>3. Once all Docker images have been downloaded, you&rsquo;ll see something like the following in your terminal:</p>
<pre><code>Creating network &quot;docker_default&quot; with the default driver
Creating docker_mongodata_1
Creating docker_pillarapp_1
Creating docker_elkhorn_1
Creating docker_cayapp_1
</code></pre>

<p>4. If this is your first time installing Ask, you&rsquo;ll now have to shut everything down with the Docker <code>down</code> command. This up-down-up sequence initializes authentication on MongoDB.</p>
<pre><code>docker-compose -f ask-basic-local.yaml down
</code></pre>

<p>5. Finally, start the Docker container back up. In future, you can simply use this command to start your Docker container (instead of bringing Docker up, then down, then up again).</p>
<pre><code>docker-compose -f ask-basic-local.yaml up -d
</code></pre>

<h3 id="access-ask">Access Ask</h3>
<p>You can now use Ask by accessing the front end URL in your browser.</p>
<ul>
<li>On Mac, the default Docker Machine IP for local machines is <code>192.168.99.100</code>: <a href="http://192.168.99.100">http://192.168.99.100</a></li>
</ul>
<h2 id="basic-demo-setup-linux">Basic demo setup: Linux</h2>
<h3 id="before-you-begin_1">Before you begin</h3>
<p>You must have the following items installed:</p>
<ul>
<li><strong>MongoDB</strong>: You can find instructions on installing MongoDB <a href="https://docs.mongodb.com/getting-started/shell/">on the MongoDB website</a>.<ul>
<li>Make sure MongoDB is running before you proceed: use the command <code>mongod</code> to start running MongoDB as a daemon.</li>
</ul>
</li>
<li><strong>Docker Toolbox</strong>: You can install Docker Toolbox from the <a href="https://www.docker.com/products/docker-toolbox">Docker Toolbox product page</a>.<ul>
<li>If you already have Docker installed, you&rsquo;ll want to make sure that you have Docker Compose version 1.7 or later. You can check your version using the command <code>docker-compose --version</code>.</li>
</ul>
</li>
</ul>
<p>You should also have the following resources on your machine before installing:</p>
<ul>
<li>Minimum CPU: 2.0 GHz</li>
<li>Minimum RAM: 4GB</li>
<li>Minimum disk space: 4GB</li>
</ul>
<h4 id="browser-requirements_1">Browser requirements</h4>
<p>We currently support Chrome.</p>
<h3 id="get-the-source-code_1">Get the source code</h3>
<p>Clone the Ask repository. This repository contains a number of setup files that you can edit, and will help you easily spin up a Docker container.</p>
<pre><code>git clone https://github.com/coralproject/ask.git
</code></pre>

<p>Then cd into the <code>ask/docker</code> directory.</p>
<pre><code>cd ask/docker
</code></pre>

<h3 id="start-docker_1">Start Docker</h3>
<p>Start Docker.</p>
<ul>
<li>On the server, you can do this via the command:
  <code>sudo service docker start</code></li>
<li>On your local machine, you can start Docker via the Docker Quickstart Terminal. The Docker Quickstart Terminal will open a new terminal window, running Docker, that you will then use to run the rest of the Docker related commands below.</li>
</ul>
<h4 id="troubleshooting_1">Troubleshooting</h4>
<ul>
<li>You may have to use the command <code>eval $(docker-machine env)</code> before proceeding to get Docker to work.</li>
<li>If, at any point, you see the error message <code>Cannot connect to the Docker daemon. Is the docker daemon running on this host?</code>, this probably means that you are not running Docker commands within the Docker Quickstart Terminal. Make sure that you&rsquo;ve opened up the Docker Quickstart Terminal and are running your Docker commands there.</li>
<li>If you see an error like the one below, try closing and reopening Docker Quickstart Terminal again, or simply waiting (sometimes it can take a few moments).</li>
</ul>
<pre><code>(default) Check network to re-create if needed...
(default) Waiting for an IP...
</code></pre>

<h3 id="set-frontend-url-variables">Set frontend URL variables</h3>
<p>On Linux, you will have to manually edit a few variables in the <code>ask-basic-local.yaml</code> file. This is because the current basic demo setup is geared toward Macs, and the Docker Machine IP for local installations on Mac is different from the IP for Linux machines.</p>
<p>Basically, anywhere that you see <code>192.168.99.100</code> in the <code>ask-basic-local.yaml</code> file, you want to change it to <code>127.0.0.1</code>.</p>
<p>Open up your <code>ask-basic-local.yaml</code> file and set these variables:</p>
<ul>
<li><code>PILLAR_URL</code> (under &ldquo;cayapp&rdquo;): Set to <code>http://127.0.0.1:8080</code>.</li>
<li><code>ELKHORN_URL</code> (under &ldquo;cayapp&rdquo;): Set to <code>http://127.0.0.1:4444</code>.</li>
<li><code>PILLAR_URL</code> (under &ldquo;elkhorn&rdquo;): Set to <code>http://127.0.0.1:8080</code>.</li>
</ul>
<h3 id="spin-up-the-docker-container_1">Spin up the Docker container</h3>
<p>Ensure you are in the <code>ask/docker</code> directory.</p>
<p>The very first time that you spin up the Docker container, this will be a multi-step process:</p>
<p>1. Spin up the Docker container:</p>
<pre><code>docker-compose -f ask-basic-local.yaml up -d
</code></pre>

<p>The <code>ask-basic-local.yaml</code> file contained in the <code>ask/docker</code> directory contains all the instructions that Docker Compose needs to set up the Ask product.</p>
<p><strong>Troubleshooting note</strong>: If you see an error, such as the one below, make sure that your Docker Compose installation is version 1.7 or above. You can check your version using the command <code>docker-compose --version</code>.</p>
<pre><code>Unsupported config option for services service: 'mongodata'
</code></pre>

<p>2. Docker will now download and install a number of Docker images. This may take a few minutes.</p>
<p>3. Once all Docker images have been downloaded, you&rsquo;ll see something like the following in your terminal:</p>
<pre><code>Creating network &quot;docker_default&quot; with the default driver
Creating docker_mongodata_1
Creating docker_pillarapp_1
Creating docker_elkhorn_1
Creating docker_cayapp_1
</code></pre>

<p>4. If this is your first time installing Ask, you&rsquo;ll now have to shut everything down with the Docker <code>down</code> command. This up-down-up sequence initializes authentication on MongoDB.</p>
<pre><code>docker-compose -f ask-basic-local.yaml down
</code></pre>

<p>5. Finally, start the Docker container back up. In future, you can simply use this command to start your Docker container (instead of bringing Docker up, then down, then up again).</p>
<pre><code>docker-compose -f ask-basic-local.yaml up -d
</code></pre>

<h3 id="access-ask_1">Access Ask</h3>
<p>You can now use Ask by accessing the front end URL in your browser.</p>
<ul>
<li>On Linux, this should be set to <code>127.0.0.1</code> (the URL we set back in the <a href="#set-frontend-URL-variables">setting frontend URL variables</a> step): <a href="http://127.0.0.1">http://127.0.0.1</a></li>
</ul>
<h2 id="basic-demo-setup-windows">Basic demo setup: Windows</h2>
<h3 id="before-you-begin_2">Before you begin</h3>
<p>You must have the following items installed:</p>
<ul>
<li><strong>MongoDB</strong>: You can find instructions on installing MongoDB <a href="https://docs.mongodb.com/getting-started/shell/">on the MongoDB website</a>.<ul>
<li>Make sure MongoDB is running before you proceed: use the command <code>mongod</code> to start running MongoDB as a daemon.</li>
</ul>
</li>
<li><strong>Docker Toolbox</strong>: You can install Docker Toolbox from the <a href="https://www.docker.com/products/docker-toolbox">Docker Toolbox product page</a>.<ul>
<li>If you already have Docker installed, you&rsquo;ll want to make sure that you have Docker Compose version 1.7 or later. You can check your version using the command <code>docker-compose --version</code>.</li>
</ul>
</li>
</ul>
<p>You should also have the following resources on your machine before installing:</p>
<ul>
<li>Minimum CPU: 2.0 GHz</li>
<li>Minimum RAM: 4GB</li>
<li>Minimum disk space: 4GB</li>
</ul>
<h4 id="browser-requirements_2">Browser requirements</h4>
<p>We currently support Chrome.</p>
<h3 id="get-the-source-code_2">Get the source code</h3>
<p>Clone the Ask repository. This repository contains a number of setup files that you can edit, and will help you easily spin up a Docker container.</p>
<pre><code>git clone https://github.com/coralproject/ask.git
</code></pre>

<p>Then cd into the <code>ask/docker</code> directory.</p>
<pre><code>cd ask/docker
</code></pre>

<h3 id="start-docker_2">Start Docker</h3>
<p>Start Docker.</p>
<ul>
<li>On the server, you can do this via the command:
  <code>sudo service docker start</code></li>
<li>On your local machine, you can start Docker via the Docker Quickstart Terminal. The Docker Quickstart Terminal will open a new terminal window, running Docker, that you will then use to run the rest of the Docker related commands below.</li>
</ul>
<h4 id="troubleshooting_2">Troubleshooting</h4>
<ul>
<li>You may have to use the command <code>eval $(docker-machine env)</code> before proceeding to get Docker to work.</li>
<li>If, at any point, you see the error message <code>Cannot connect to the Docker daemon. Is the docker daemon running on this host?</code>, this probably means that you are not running Docker commands within the Docker Quickstart Terminal. Make sure that you&rsquo;ve opened up the Docker Quickstart Terminal and are running your Docker commands there.</li>
<li>If you see an error like the one below, try closing and reopening Docker Quickstart Terminal again, or simply waiting (sometimes it can take a few moments).</li>
</ul>
<pre><code>(default) Check network to re-create if needed...
(default) Waiting for an IP...
</code></pre>

<h3 id="spin-up-the-docker-container_2">Spin up the Docker container</h3>
<p>Ensure you are in the <code>ask/docker</code> directory.</p>
<p>The very first time that you spin up the Docker container, this will be a multi-step process:</p>
<p>1. Spin up the Docker container:</p>
<pre><code>docker-compose -f ask-basic-local.yaml up -d
</code></pre>

<p>The <code>ask-basic-local.yaml</code> file contained in the <code>ask/docker</code> directory contains all the instructions that Docker Compose needs to set up the Ask product.</p>
<p><strong>Troubleshooting note</strong>: If you see an error, such as the one below, make sure that your Docker Compose installation is version 1.7 or above. You can check your version using the command <code>docker-compose --version</code>.</p>
<pre><code>Unsupported config option for services service: 'mongodata'
</code></pre>

<p>2. Docker will now download and install a number of Docker images. This may take a few minutes.</p>
<p>3. Once all Docker images have been downloaded, you&rsquo;ll see something like the following in your terminal:</p>
<pre><code>Creating network &quot;docker_default&quot; with the default driver
Creating docker_mongodata_1
Creating docker_pillarapp_1
Creating docker_elkhorn_1
Creating docker_cayapp_1
</code></pre>

<p>4. If this is your first time installing Ask, you&rsquo;ll now have to shut everything down with the Docker <code>down</code> command. This up-down-up sequence initializes authentication on MongoDB.</p>
<pre><code>docker-compose -f ask-basic-local.yaml down
</code></pre>

<p>5. Finally, start the Docker container back up. In future, you can simply use this command to start your Docker container (instead of bringing Docker up, then down, then up again).</p>
<pre><code>docker-compose -f ask-basic-local.yaml up -d
</code></pre>

<h3 id="access-ask_2">Access Ask</h3>
<p>You can now use Ask by accessing the front end URL in your browser.</p>
<ul>
<li>On Windows, this should be set to <code>127.0.0.1</code> by default: <a href="http://127.0.0.1">http://127.0.0.1</a></li>
</ul>
<h1 id="ask-installation-advanced-setup">Ask installation: advanced setup</h1>
<p>We currently support Mac, Linux, and Windows. Choose your operating system to view installation instructions.</p>
<ul>
<li><strong><a href="#basic-demo-setup-mac">Mac OS X</a></strong>: We support OS X El Capitan (10.11) or newer.</li>
<li><strong><a href="#basic-demo-setup-linux">Linux</a></strong>: We support Ubuntu 15.10 or newer.</li>
<li><strong><a href="#basic-demo-setup-windows">Windows</a></strong>: We support Windows 7 or newer.</li>
</ul>
<h2 id="advanced-setup-mac-os-x">Advanced setup: Mac OS X</h2>
<h3 id="before-you-begin_3">Before you begin</h3>
<p>You must have the following items installed and running:</p>
<ul>
<li><strong>MongoDB</strong>: You can find instructions on installing MongoDB <a href="https://docs.mongodb.com/getting-started/shell/">on the MongoDB website</a>.<ul>
<li>Make sure MongoDB is running before you proceed: use the command <code>mongod</code> to start running MongoDB as a daemon.</li>
</ul>
</li>
<li><strong>Docker Toolbox</strong>: You can install Docker Toolbox from the <a href="https://www.docker.com/products/docker-toolbox">Docker Toolbox product page</a>.<ul>
<li>If you already have Docker installed, you&rsquo;ll want to make sure that you have Docker Compose version 1.7 or later. You can check your version using the command <code>docker-compose --version</code>.</li>
</ul>
</li>
</ul>
<p>You should also have the following resources on your machine before installing:</p>
<ul>
<li>Minimum CPU: 2.0 GHz</li>
<li>Minimum RAM: 4GB</li>
<li>Minimum disk space: 4GB</li>
</ul>
<h4 id="browser-requirements_3">Browser requirements</h4>
<p>We currently support Chrome.</p>
<h3 id="set-up-your-external-storage-system-optional">Set up your external storage system (optional)</h3>
<p>Ask uses an external storage system as a cache to store pre-built bundled files of your created form. This allows the forms to be quickly served up when embedded on your page. Each bundled file runs about ~100KB, and there is one bundled file per form.</p>
<p>There are currently a couple of different options available for the external storage system you can use.</p>
<ul>
<li><strong>Amazon S3</strong>: Amazon S3 is a storage system that is relatively easy to set up and use, and scales well: it allows many concurrent users to access the files.</li>
<li><strong>Local file system</strong>: If you don&rsquo;t set up an external storage system in the <a href="#set-environment-variables">set environment variables</a> step, Ask will default to using your local file system for storage. This can be a good option if you are developing locally, or just installing Ask for demo purposes. If you want to scale, however, this can get unwieldy, and it will be best to set up a storage system that is fast and handles concurrency well.</li>
</ul>
<h4 id="amazon-s3">Amazon S3</h4>
<p><a href="https://aws.amazon.com/s3/">Amazon S3</a> is a good option for your external storage system because it is fast, handles concurrency, and will scale well.</p>
<p>The setup of S3 is straightforward, and Amazon has good documentation. For the purposes of setting S3 up for Ask, you can follow Amazon&rsquo;s instructions <a href="http://docs.aws.amazon.com/AmazonS3/latest/gsg/SigningUpforS3.html">here</a>.</p>
<ol>
<li>Follow the directions for <a href="http://docs.aws.amazon.com/AmazonS3/latest/gsg/SigningUpforS3.html">Sign Up for Amazon S3</a> and <a href="http://docs.aws.amazon.com/AmazonS3/latest/gsg/CreatingABucket.html">Create a Bucket</a>. There is no need to continue further to the demos for &ldquo;Add an Object to a Bucket&rdquo; and beyond: those are simply examples showing you how to use S3.</li>
</ol>
<ul>
<li>For my example, I named my bucket &ldquo;ask-bucket-test&rdquo; and chose region &ldquo;Northern California&rdquo; (which corresponds to us-west-2).</li>
<li>During the sign up process, you will create an AWS Access Key. Hang on to that information (you have the option to download it).</li>
</ul>
<ol>
<li>
<p>Once you have signed up and set up a bucket, go to your <a href="https://console.aws.amazon.com/s3">S3 console</a> to set up your permissions under &ldquo;Security Credentials.&rdquo;</p>
</li>
<li>
<p>Ensure that under &ldquo;Permissions,&rdquo; the only Grantee is you. This means that nobody but you can access your bucket (using your AWS Access Key).</p>
</li>
</ol>
<p>You&rsquo;re all set! You can now use your AWS Access Key to connect Ask to your S3 bucket (you&rsquo;ll set this up in the <a href="#set-environment-variables">Set environment variables</a> section below). If you didn&rsquo;t save your AWS Access Key during the set up process, you can go to the &ldquo;Security Credentials&rdquo; section and create a new one.</p>
<h3 id="get-the-source-code_3">Get the source code</h3>
<p>Clone the Ask repository. This repository contains a number of setup files that you can edit, and will help you easily spin up a Docker container.</p>
<pre><code>git clone https://github.com/coralproject/ask.git
</code></pre>

<p>Then cd into the <code>ask/docker</code> directory.</p>
<pre><code>cd ask/docker
</code></pre>

<h3 id="set-environment-variables">Set environment variables</h3>
<p>The <code>env.conf</code> file contains environment variables you need to set. Setting your environment variables tells Docker which IP address your Coral front end will have, as well as other information such as your MongoDB username and password.</p>
<pre><code>export FRONTEND_HOST=192.168.99.100

# mongo:
export MONGO_AUTHDB=admin
export MONGO_USER=coral-user
export MONGO_PASS=welcome
export MONGO_DB=coral
</code></pre>

<ul>
<li><code>FRONTEND_HOST</code>: set to your desired IP address for the front end.<ul>
<li>On Mac, the default Docker Machine IP for laptops is <code>192.168.99.100</code>.</li>
</ul>
</li>
</ul>
<p>MongoDB:</p>
<ul>
<li><code>MONGO_USER</code>: set to the username for your MongoDB</li>
<li><code>MONGO_PASS</code>: set to the password for your MongoDB</li>
<li><code>MONGO_DB</code>: set to the name of your MongoDB (in this instance, &ldquo;coral&rdquo;)</li>
<li><code>MONGO_AUTHDB</code>: set to the admin user of your database</li>
</ul>
<p>Amazon S3 (optional):</p>
<ul>
<li><code>S3_BUCKET</code>: set to the name of your S3 bucket (in this example, <code>ask-bucket-test</code>)</li>
<li><code>AWS_REGION</code>: set to the AWS region that you selected in your S3 setup. You can find it in your S3 console URL. In this example, it is <code>us-west-2</code>.</li>
<li><code>AWS_ACCESS_KEY</code>: set to your AWS Access Key ID that you received when you set up S3. You can also create a new key and key ID in the &ldquo;Security Credentials&rdquo; area of your S3 console.</li>
<li><code>AWS_ACCESS_KEY</code>: set to your AWS Access Key that you received when you set up S3. You can also create a new key and key ID in the &ldquo;Security Credentials&rdquo; area of your S3 console.</li>
</ul>
<h3 id="start-docker_3">Start Docker</h3>
<p>Start Docker.</p>
<ul>
<li>On the server, you can do this via the command:
  <code>sudo service docker start</code></li>
<li>On your local machine, you can start Docker via the Docker Quickstart Terminal. This will usually be in your Applications folder, or (if on Mac) you can type &ldquo;docker quickstart&rdquo; into Spotlight to find it quickly. The Docker Quickstart Terminal will open a new terminal window, running Docker, that you will then use to run the rest of the Docker related commands below.</li>
</ul>
<h4 id="troubleshooting_3">Troubleshooting</h4>
<ul>
<li>You may have to use the command <code>eval $(docker-machine env)</code> before proceeding to get Docker to work.</li>
<li>If, at any point, you see the error message <code>Cannot connect to the Docker daemon. Is the docker daemon running on this host?</code>, this probably means that you are not running Docker commands within the Docker Quickstart Terminal. Make sure that you&rsquo;ve opened up the Docker Quickstart Terminal and are running your Docker commands there.</li>
<li>If you see an error like the one below, try closing and reopening Docker Quickstart Terminal again, or simply waiting (sometimes it can take a few moments).</li>
</ul>
<pre><code>(default) Check network to re-create if needed...
(default) Waiting for an IP...
</code></pre>

<h3 id="spin-up-the-docker-container_3">Spin up the Docker container</h3>
<p>Ensure you are in the <code>ask/docker</code> directory.</p>
<p>First, run the following command to export your edited variables and set the environment variables.</p>
<pre><code>source env.conf
</code></pre>

<p>The very first time that you spin up the Docker container, this will be a multi-step process:</p>
<p>1. Spin up the Docker container:</p>
<pre><code>docker-compose -f docker-compose.yml up -d
</code></pre>

<p>The <code>docker-compose.yml</code> file contained in the <code>ask/docker</code> directory contains all the instructions that Docker Compose needs to set up the Ask product.</p>
<p><strong>Troubleshooting note</strong>: If you see an error, such as the one below, make sure that your Docker Compose installation is version 1.7 or above. You can check your version using the command <code>docker-compose --version</code>.</p>
<pre><code>Unsupported config option for services service: 'mongodata'
</code></pre>

<p>2. Docker will now download and install a number of Docker images. This may take a few minutes.</p>
<p>3. Once all Docker images have been downloaded, you&rsquo;ll see something like the following in your terminal:</p>
<pre><code>Creating docker_mongodata_1
Creating docker_pillarapp_1
Creating docker_elkhorn_1
Creating docker_cayapp_1
</code></pre>

<p>4. If this is your first time installing Ask, you&rsquo;ll now have to shut everything down with the Docker <code>down</code> command. This up-down-up sequence initializes authentication on MongoDB.</p>
<pre><code>docker-compose -f docker-compose.yml down
</code></pre>

<p>5. Finally, start the Docker container back up. In future, you can simply use this command to start your Docker container (instead of bringing Docker up, then down, then up again).</p>
<pre><code>docker-compose -f docker-compose.yml up -d
</code></pre>

<h3 id="access-ask_3">Access Ask</h3>
<p>You can now use Ask by accessing the front end URL in your browser. This is the URL you specified as <code>FRONTEND_HOST</code> in the <code>env.conf</code> setup above.</p>
<ul>
<li>On Mac, the default Docker Machine IP for laptops is <code>192.168.99.100</code>: <a href="http://192.168.99.100">http://192.168.99.100</a></li>
</ul>
<h2 id="advanced-setup-linux">Advanced setup: Linux</h2>
<h3 id="before-you-begin_4">Before you begin</h3>
<p>You must have the following items installed and running:</p>
<ul>
<li><strong>MongoDB</strong>: You can find instructions on installing MongoDB <a href="https://docs.mongodb.com/getting-started/shell/">on the MongoDB website</a>.<ul>
<li>Make sure MongoDB is running before you proceed: use the command <code>mongod</code> to start running MongoDB as a daemon.</li>
</ul>
</li>
<li><strong>Docker Toolbox</strong>: You can install Docker Toolbox from the <a href="https://www.docker.com/products/docker-toolbox">Docker Toolbox product page</a>.<ul>
<li>If you already have Docker installed, you&rsquo;ll want to make sure that you have Docker Compose version 1.7 or later. You can check your version using the command <code>docker-compose --version</code>.</li>
</ul>
</li>
</ul>
<p>You should also have the following resources on your machine before installing:</p>
<ul>
<li>Minimum CPU: 2.0 GHz</li>
<li>Minimum RAM: 4GB</li>
<li>Minimum disk space: 4GB</li>
</ul>
<h4 id="browser-requirements_4">Browser requirements</h4>
<p>We currently support Chrome.</p>
<h3 id="set-up-your-external-storage-system-optional_1">Set up your external storage system (optional)</h3>
<p>Ask uses an external storage system as a cache to store pre-built bundled files of your created form. This allows the forms to be quickly served up when embedded on your page. Each bundled file runs about ~100KB, and there is one bundled file per form.</p>
<p>There are currently a couple of different options available for the external storage system you can use.</p>
<ul>
<li><strong>Amazon S3</strong>: Amazon S3 is a storage system that is relatively easy to set up and use, and scales well: it allows many concurrent users to access the files.</li>
<li><strong>Local file system</strong>: If you don&rsquo;t set up an external storage system in the <a href="#set-environment-variables">set environment variables</a> step, Ask will default to using your local file system for storage. This can be a good option if you are developing locally, or just installing Ask for demo purposes. If you want to scale, however, this can get unwieldy, and it will be best to set up a storage system that is fast and handles concurrency well.</li>
</ul>
<h4 id="amazon-s3_1">Amazon S3</h4>
<p><a href="https://aws.amazon.com/s3/">Amazon S3</a> is a good option for your external storage system because it is fast, handles concurrency, and will scale well.</p>
<p>The setup of S3 is straightforward, and Amazon has good documentation. For the purposes of setting S3 up for Ask, you can follow Amazon&rsquo;s instructions <a href="http://docs.aws.amazon.com/AmazonS3/latest/gsg/SigningUpforS3.html">here</a>.</p>
<ol>
<li>Follow the directions for <a href="http://docs.aws.amazon.com/AmazonS3/latest/gsg/SigningUpforS3.html">Sign Up for Amazon S3</a> and <a href="http://docs.aws.amazon.com/AmazonS3/latest/gsg/CreatingABucket.html">Create a Bucket</a>. There is no need to continue further to the demos for &ldquo;Add an Object to a Bucket&rdquo; and beyond: those are simply examples showing you how to use S3.</li>
</ol>
<ul>
<li>For my example, I named my bucket &ldquo;ask-bucket-test&rdquo; and chose region &ldquo;Northern California&rdquo; (which corresponds to us-west-2).</li>
<li>During the sign up process, you will create an AWS Access Key. Hang on to that information (you have the option to download it).</li>
</ul>
<ol>
<li>
<p>Once you have signed up and set up a bucket, go to your <a href="https://console.aws.amazon.com/s3">S3 console</a> to set up your permissions under &ldquo;Security Credentials.&rdquo;</p>
</li>
<li>
<p>Ensure that under &ldquo;Permissions,&rdquo; the only Grantee is you. This means that nobody but you can access your bucket (using your AWS Access Key).</p>
</li>
</ol>
<p>You&rsquo;re all set! You can now use your AWS Access Key to connect Ask to your S3 bucket (you&rsquo;ll set this up in the <a href="#set-environment-variables">Set environment variables</a> section below). If you didn&rsquo;t save your AWS Access Key during the set up process, you can go to the &ldquo;Security Credentials&rdquo; section and create a new one.</p>
<h3 id="get-the-source-code_4">Get the source code</h3>
<p>Clone the Ask repository. This repository contains a number of setup files that you can edit, and will help you easily spin up a Docker container.</p>
<pre><code>git clone https://github.com/coralproject/ask.git
</code></pre>

<p>Then cd into the <code>ask/docker</code> directory.</p>
<pre><code>cd ask/docker
</code></pre>

<h3 id="set-environment-variables_1">Set environment variables</h3>
<p>The <code>env.conf</code> file contains environment variables you need to set. Setting your environment variables tells Docker which IP address your Coral front end will have, as well as other information such as your MongoDB username and password.</p>
<pre><code>export FRONTEND_HOST=192.168.99.100

# mongo:
export MONGO_AUTHDB=admin
export MONGO_USER=coral-user
export MONGO_PASS=welcome
export MONGO_DB=coral
</code></pre>

<ul>
<li><code>FRONTEND_HOST</code>: set to your desired IP address for the front end.<ul>
<li>On Linux, this should be set to <code>127.0.0.1</code> or a private IP address.</li>
</ul>
</li>
</ul>
<p>MongoDB:</p>
<ul>
<li><code>MONGO_USER</code>: set to the username for your MongoDB</li>
<li><code>MONGO_PASS</code>: set to the password for your MongoDB</li>
<li><code>MONGO_DB</code>: set to the name of your MongoDB (in this instance, &ldquo;coral&rdquo;)</li>
<li><code>MONGO_AUTHDB</code>: set to the admin user of your database</li>
</ul>
<p>Amazon S3 (optional):</p>
<ul>
<li><code>S3_BUCKET</code>: set to the name of your S3 bucket (in this example, <code>ask-bucket-test</code>)</li>
<li><code>AWS_REGION</code>: set to the AWS region that you selected in your S3 setup. You can find it in your S3 console URL. In this example, it is <code>us-west-2</code>.</li>
<li><code>AWS_ACCESS_KEY</code>: set to your AWS Access Key ID that you received when you set up S3. You can also create a new key and key ID in the &ldquo;Security Credentials&rdquo; area of your S3 console.</li>
<li><code>AWS_ACCESS_KEY</code>: set to your AWS Access Key that you received when you set up S3. You can also create a new key and key ID in the &ldquo;Security Credentials&rdquo; area of your S3 console.</li>
</ul>
<h3 id="start-docker_4">Start Docker</h3>
<p>Start Docker.</p>
<ul>
<li>On the server, you can do this via the command:
  <code>sudo service docker start</code></li>
<li>On your local machine, you can start Docker via the Docker Quickstart Terminal. The Docker Quickstart Terminal will open a new terminal window, running Docker, that you will then use to run the rest of the Docker related commands below.</li>
</ul>
<h4 id="troubleshooting_4">Troubleshooting</h4>
<ul>
<li>You may have to use the command <code>eval $(docker-machine env)</code> before proceeding to get Docker to work.</li>
<li>If, at any point, you see the error message <code>Cannot connect to the Docker daemon. Is the docker daemon running on this host?</code>, this probably means that you are not running Docker commands within the Docker Quickstart Terminal. Make sure that you&rsquo;ve opened up the Docker Quickstart Terminal and are running your Docker commands there.</li>
<li>If you see an error like the one below, try closing and reopening Docker Quickstart Terminal again, or simply waiting (sometimes it can take a few moments).</li>
</ul>
<pre><code>(default) Check network to re-create if needed...
(default) Waiting for an IP...
</code></pre>

<h3 id="spin-up-the-docker-container_4">Spin up the Docker container</h3>
<p>Ensure you are in the <code>ask/docker</code> directory.</p>
<p>First, run the following command to export your edited variables and set the environment variables.</p>
<pre><code>source env.conf
</code></pre>

<p>The very first time that you spin up the Docker container, this will be a multi-step process:</p>
<p>1. Spin up the Docker container:</p>
<pre><code>docker-compose -f docker-compose.yml up -d
</code></pre>

<p>The <code>docker-compose.yml</code> file contained in the <code>ask/docker</code> directory contains all the instructions that Docker Compose needs to set up the Ask product.</p>
<p><strong>Troubleshooting note</strong>: If you see an error, such as the one below, make sure that your Docker Compose installation is version 1.7 or above. You can check your version using the command <code>docker-compose --version</code>.</p>
<pre><code>Unsupported config option for services service: 'mongodata'
</code></pre>

<p>2. Docker will now download and install a number of Docker images. This may take a few minutes.</p>
<p>3. Once all Docker images have been downloaded, you&rsquo;ll see something like the following in your terminal:</p>
<pre><code>Creating docker_mongodata_1
Creating docker_pillarapp_1
Creating docker_elkhorn_1
Creating docker_cayapp_1
</code></pre>

<p>4. If this is your first time installing Ask, you&rsquo;ll now have to shut everything down with the Docker <code>down</code> command. This up-down-up sequence initializes authentication on MongoDB.</p>
<pre><code>docker-compose -f docker-compose.yml down
</code></pre>

<p>5. Finally, start the Docker container back up. In future, you can simply use this command to start your Docker container (instead of bringing Docker up, then down, then up again).</p>
<pre><code>docker-compose -f docker-compose.yml up -d
</code></pre>

<h3 id="access-ask_4">Access Ask</h3>
<p>You can now use Ask by accessing the front end URL in your browser. This is the URL you specified as <code>FRONTEND_HOST</code> in the <code>env.conf</code> setup above.</p>
<ul>
<li>On Linux, this should be set to <code>127.0.0.1</code> or a private IP address (the IP you set when <a href="#set-environment-variables">setting your environment variables</a>): <a href="http://127.0.0.1">http://127.0.0.1</a></li>
</ul>
<h2 id="advanced-setup-windows">Advanced setup: Windows</h2>
<h3 id="before-you-begin_5">Before you begin</h3>
<p>You must have the following items installed and running:</p>
<ul>
<li><strong>MongoDB</strong>: You can find instructions on installing MongoDB <a href="https://docs.mongodb.com/getting-started/shell/">on the MongoDB website</a>.<ul>
<li>Make sure MongoDB is running before you proceed: use the command <code>mongod</code> to start running MongoDB as a daemon.</li>
</ul>
</li>
<li><strong>Docker Toolbox</strong>: You can install Docker Toolbox from the <a href="https://www.docker.com/products/docker-toolbox">Docker Toolbox product page</a>.<ul>
<li>If you already have Docker installed, you&rsquo;ll want to make sure that you have Docker Compose version 1.7 or later. You can check your version using the command <code>docker-compose --version</code>.</li>
</ul>
</li>
</ul>
<p>You should also have the following resources on your machine before installing:</p>
<ul>
<li>Minimum CPU: 2.0 GHz</li>
<li>Minimum RAM: 4GB</li>
<li>Minimum disk space: 4GB</li>
</ul>
<h4 id="browser-requirements_5">Browser requirements</h4>
<p>We currently support Chrome.</p>
<h3 id="set-up-your-external-storage-system-optional_2">Set up your external storage system (optional)</h3>
<p>Ask uses an external storage system as a cache to store pre-built bundled files of your created form. This allows the forms to be quickly served up when embedded on your page. Each bundled file runs about ~100KB, and there is one bundled file per form.</p>
<p>There are currently a couple of different options available for the external storage system you can use.</p>
<ul>
<li><strong>Amazon S3</strong>: Amazon S3 is a storage system that is relatively easy to set up and use, and scales well: it allows many concurrent users to access the files.</li>
<li><strong>Local file system</strong>: If you don&rsquo;t set up an external storage system in the <a href="#set-environment-variables">set environment variables</a> step, Ask will default to using your local file system for storage. This can be a good option if you are developing locally, or just installing Ask for demo purposes. If you want to scale, however, this can get unwieldy, and it will be best to set up a storage system that is fast and handles concurrency well.</li>
</ul>
<h4 id="amazon-s3_2">Amazon S3</h4>
<p><a href="https://aws.amazon.com/s3/">Amazon S3</a> is a good option for your external storage system because it is fast, handles concurrency, and will scale well.</p>
<p>The setup of S3 is straightforward, and Amazon has good documentation. For the purposes of setting S3 up for Ask, you can follow Amazon&rsquo;s instructions <a href="http://docs.aws.amazon.com/AmazonS3/latest/gsg/SigningUpforS3.html">here</a>.</p>
<ol>
<li>Follow the directions for <a href="http://docs.aws.amazon.com/AmazonS3/latest/gsg/SigningUpforS3.html">Sign Up for Amazon S3</a> and <a href="http://docs.aws.amazon.com/AmazonS3/latest/gsg/CreatingABucket.html">Create a Bucket</a>. There is no need to continue further to the demos for &ldquo;Add an Object to a Bucket&rdquo; and beyond: those are simply examples showing you how to use S3.</li>
</ol>
<ul>
<li>For my example, I named my bucket &ldquo;ask-bucket-test&rdquo; and chose region &ldquo;Northern California&rdquo; (which corresponds to us-west-2).</li>
<li>During the sign up process, you will create an AWS Access Key. Hang on to that information (you have the option to download it).</li>
</ul>
<ol>
<li>
<p>Once you have signed up and set up a bucket, go to your <a href="https://console.aws.amazon.com/s3">S3 console</a> to set up your permissions under &ldquo;Security Credentials.&rdquo;</p>
</li>
<li>
<p>Ensure that under &ldquo;Permissions,&rdquo; the only Grantee is you. This means that nobody but you can access your bucket (using your AWS Access Key).</p>
</li>
</ol>
<p>You&rsquo;re all set! You can now use your AWS Access Key to connect Ask to your S3 bucket (you&rsquo;ll set this up in the <a href="#set-environment-variables">Set environment variables</a> section below). If you didn&rsquo;t save your AWS Access Key during the set up process, you can go to the &ldquo;Security Credentials&rdquo; section and create a new one.</p>
<h3 id="get-the-source-code_5">Get the source code</h3>
<p>Clone the Ask repository. This repository contains a number of setup files that you can edit, and will help you easily spin up a Docker container.</p>
<pre><code>git clone https://github.com/coralproject/ask.git
</code></pre>

<p>Then cd into the <code>ask/docker</code> directory.</p>
<pre><code>cd ask/docker
</code></pre>

<h3 id="set-environment-variables_2">Set environment variables</h3>
<p>The <code>env.conf</code> file contains environment variables you need to set. Setting your environment variables tells Docker which IP address your Coral front end will have, as well as other information such as your MongoDB username and password.</p>
<pre><code>export FRONTEND_HOST=192.168.99.100

# mongo:
export MONGO_AUTHDB=admin
export MONGO_USER=coral-user
export MONGO_PASS=welcome
export MONGO_DB=coral
</code></pre>

<ul>
<li><code>FRONTEND_HOST</code>: set to your desired IP address for the front end.<ul>
<li>On Windows, this should be set to <code>127.0.0.1</code> or a private IP address.</li>
</ul>
</li>
</ul>
<p>MongoDB:</p>
<ul>
<li><code>MONGO_USER</code>: set to the username for your MongoDB</li>
<li><code>MONGO_PASS</code>: set to the password for your MongoDB</li>
<li><code>MONGO_DB</code>: set to the name of your MongoDB (in this instance, &ldquo;coral&rdquo;)</li>
<li><code>MONGO_AUTHDB</code>: set to the admin user of your database</li>
</ul>
<p>Amazon S3 (optional):</p>
<ul>
<li><code>S3_BUCKET</code>: set to the name of your S3 bucket (in this example, <code>ask-bucket-test</code>)</li>
<li><code>AWS_REGION</code>: set to the AWS region that you selected in your S3 setup. You can find it in your S3 console URL. In this example, it is <code>us-west-2</code>.</li>
<li><code>AWS_ACCESS_KEY</code>: set to your AWS Access Key ID that you received when you set up S3. You can also create a new key and key ID in the &ldquo;Security Credentials&rdquo; area of your S3 console.</li>
<li><code>AWS_ACCESS_KEY</code>: set to your AWS Access Key that you received when you set up S3. You can also create a new key and key ID in the &ldquo;Security Credentials&rdquo; area of your S3 console.</li>
</ul>
<h3 id="start-docker_5">Start Docker</h3>
<p>Start Docker.</p>
<ul>
<li>On the server, you can do this via the command:
  <code>sudo service docker start</code></li>
<li>On your local machine, you can start Docker via the Docker Quickstart Terminal. This will usually be in your Applications folder, or (if on Mac) you can type &ldquo;docker quickstart&rdquo; into Spotlight to find it quickly. The Docker Quickstart Terminal will open a new terminal window, running Docker, that you will then use to run the rest of the Docker related commands below.</li>
</ul>
<h4 id="troubleshooting_5">Troubleshooting</h4>
<ul>
<li>You may have to use the command <code>eval $(docker-machine env)</code> before proceeding to get Docker to work.</li>
<li>If, at any point, you see the error message <code>Cannot connect to the Docker daemon. Is the docker daemon running on this host?</code>, this probably means that you are not running Docker commands within the Docker Quickstart Terminal. Make sure that you&rsquo;ve opened up the Docker Quickstart Terminal and are running your Docker commands there.</li>
<li>If you see an error like the one below, try closing and reopening Docker Quickstart Terminal again, or simply waiting (sometimes it can take a few moments).</li>
</ul>
<pre><code>(default) Check network to re-create if needed...
(default) Waiting for an IP...
</code></pre>

<h3 id="spin-up-the-docker-container_5">Spin up the Docker container</h3>
<p>Ensure you are in the <code>ask/docker</code> directory.</p>
<p>First, run the following command to export your edited variables and set the environment variables.</p>
<pre><code>source env.conf
</code></pre>

<p>The very first time that you spin up the Docker container, this will be a multi-step process:</p>
<p>1. Spin up the Docker container:</p>
<pre><code>docker-compose -f docker-compose.yml up -d
</code></pre>

<p>The <code>docker-compose.yml</code> file contained in the <code>ask/docker</code> directory contains all the instructions that Docker Compose needs to set up the Ask product.</p>
<p><strong>Troubleshooting note</strong>: If you see an error, such as the one below, make sure that your Docker Compose installation is version 1.7 or above. You can check your version using the command <code>docker-compose --version</code>.</p>
<pre><code>Unsupported config option for services service: 'mongodata'
</code></pre>

<p>2. Docker will now download and install a number of Docker images. This may take a few minutes.</p>
<p>3. Once all Docker images have been downloaded, you&rsquo;ll see something like the following in your terminal:</p>
<pre><code>Creating docker_mongodata_1
Creating docker_pillarapp_1
Creating docker_elkhorn_1
Creating docker_cayapp_1
</code></pre>

<p>4. If this is your first time installing Ask, you&rsquo;ll now have to shut everything down with the Docker <code>down</code> command. This up-down-up sequence initializes authentication on MongoDB.</p>
<pre><code>docker-compose -f docker-compose.yml down
</code></pre>

<p>5. Finally, start the Docker container back up. In future, you can simply use this command to start your Docker container (instead of bringing Docker up, then down, then up again).</p>
<pre><code>docker-compose -f docker-compose.yml up -d
</code></pre>

<h3 id="access-ask_5">Access Ask</h3>
<p>You can now use Ask by accessing the front end URL in your browser. This is the URL you specified as <code>FRONTEND_HOST</code> in the <code>env.conf</code> setup above.</p>
<ul>
<li>On Windows, this should be set to <code>127.0.0.1</code> or a private IP address (the IP you set when <a href="#set-environment-variables">setting your environment variables</a>): <a href="http://127.0.0.1">http://127.0.0.1</a></li>
</ul>
<h1 id="troubleshooting_6">Troubleshooting</h1>
<h2 id="old-version-of-docker">Old version of Docker</h2>
<p>If you see an error while running the Docker Compose commands, make sure that your Docker Compose installation is version 1.7 or above. You can check your version using the command <code>docker-compose --version</code>.
Example error:</p>
<pre><code>Unsupported config option for services service: 'mongodata'
</code></pre>

<h2 id="viewing-running-docker-containers">Viewing running Docker containers</h2>
<p>To see all of the Docker containers currently running, use the command <code>docker ps</code> (you can read more about this command and its options at the <a href="https://docs.docker.com/engine/reference/commandline/ps/">Docker website</a>).</p>
<pre><code>docker ps
</code></pre>

<p>You should have all of the following containers running:</p>
<ul>
<li>nginx:stable-alpine</li>
<li>coralproject/cay:release</li>
<li>coralproject/elkhorn</li>
<li>coralproject/pillar:release</li>
<li>coralproject/mongodata</li>
</ul>
<h2 id="viewing-installed-docker-images">Viewing installed Docker images</h2>
<p>To see all of the Docker images you have installed, use the command <code>docker images</code> (you can read more about this command and its options at the <a href="https://docs.docker.com/engine/reference/commandline/images/">Docker website</a>).</p>
<pre><code>docker images
</code></pre>

<h2 id="viewing-docker-logs">Viewing Docker logs</h2>
<p>To view Docker logs for a container, use the command <code>docker logs &lt;container id&gt;</code> (you can read more about this command and its options at the <a href="https://docs.docker.com/engine/reference/commandline/logs/">Docker website</a>).</p>
<p>First you have to find the container id:</p>
<pre><code>docker ps
</code></pre>

<p>Then use the container id to view the logs:</p>
<pre><code>docker logs e0bbd7be19c7
</code></pre>

<h2 id="removing-docker-images">Removing Docker images</h2>
<p>There are a few reasons you might want to remove Docker images. You may wish to ensure that you are getting the latest build of the image. Or maybe something has gone awry with one or more of the images, and you just want to perform a fresh install of all images.</p>
<p>To remove all Docker images, use this command:</p>
<pre><code>docker rmi $(docker images -q)
</code></pre>

<h2 id="removing-old-docker-machines">Removing old Docker machines</h2>
<p>Another option for a &ldquo;fresh install&rdquo; is to remove old Docker machines. You could try this in combination with <a href="#removing-docker-images">removing Docker images</a> and then reinstalling Ask to see if that fixes your issue.</p>
<pre><code>docker rm -f $(docker ps -a -q)
</code></pre>

<h2 id="other-issues-while-installing">Other issues while installing</h2>
<ul>
<li>You may have to use the command <code>eval $(docker-machine env)</code> after you&rsquo;ve started Docker in order to get Docker to work.</li>
<li>If, at any point, you see the error message <code>Cannot connect to the Docker daemon. Is the docker daemon running on this host?</code>, this probably means that you are not running Docker commands within the Docker Quickstart Terminal. Make sure that you&rsquo;ve opened up the Docker Quickstart Terminal and are running your Docker commands there.</li>
<li>If you see an error like the one below, try closing and reopening Docker Quickstart Terminal again, or simply waiting (sometimes it can take a few moments).</li>
</ul>
<pre><code>(default) Check network to re-create if needed...
(default) Waiting for an IP...
</code></pre>

<h1 id="ask-tutorials">Ask tutorials</h1>
<p>We are still developing our Ask tutorials. In the meantime, you can read our guide on <a href="https://coralproject.net/forms-audience-engagement/">how to approach asking your readers for information.</a></p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
